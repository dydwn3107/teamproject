<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.prj.cosm.produce.plan.mapper.PlanMapper">

<select id="getPlanList" resultType="PlanVO">
	SELECT * FROM produce_plan ORDER BY plan_no
</select>

<select id="getPlanNo" resultType="PlanVO">
	SELECT NVL(MAX(plan_no), 0) + 1 as plan_no
	FROM produce_plan
</select>

<insert id="insertPlan" parameterType="PlanVO">
	<selectKey keyProperty="planNo" resultType="Integer" order="BEFORE">
		SELECT NVL(MAX(plan_no), 0) + 1 as no FROM produce_plan
	</selectKey>
	INSERT INTO
	produce_plan (
				  plan_no,
				  plan_quantity,
				  plan_start,
				  plan_end,
				  plan_ex,
				  )
		   VALUES(
				  #{planNo},
				  #{planQuantity},
				  #{planStart},
				  #{planEnd},
				  #{planEx},
				  )
</insert>
</mapper>